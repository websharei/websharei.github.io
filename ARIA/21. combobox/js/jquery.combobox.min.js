/*! jquery.combobox.min.js © yamoo9.net, 2016 */(function(v,d){var n={usingAria:true,activeClass:"selected",buttonLabel:"선택 목록",options:[]};d.fn.ComboboxUI=function(G){var H=this; return d.each(H,function(I,K){var J=H.eq(I);return J.data("comboboxUI",new A(J).initialize(G));});};var A=function(G){this.$el=G;};A.prototype={constructor:A,initialize:function(G){this.settings=d.extend({},n,G); this.option_id_idx=0;this.options_len=this.settings.options.length;this.selected_option_idx=0;this.focused_option=null;q.call(this);z.call(this);return this; },selectOption:function(G){C.call(this,G);console.info('"'+this.settings.options[G]+'" 값이 선택되었습니다.');return this;},isListOpen:D,openList:a,closeList:m,toggleList:e,setAria:g,desetAria:u}; var r={tab:9,enter:13,alt:18,esc:27,space:32,pageup:33,pagedown:34,left:37,up:38,right:39,down:40,};var E=0;function b(){return"ui-combobox-"+E++;}function q(){var H=this; var G=H.$el;H.id=G.attr("id")||b();G.addClass("ui-combobox-wrapper");G.find("label").addClass("ui-combobox-label");G.find("input").attr({"class":"ui-combobox","data-expanded":false,readonly:true,}); t.call(this);y.call(this);H.settings.usingAria&&g.call(H);}function g(){var G=this.$el;G.attr("role","group");G.find("input").attr({role:"combobox","aria-autocomplete":"list","aria-owns":this.id+"-list","aria-haspopup":true,"aria-readonly":true,"aria-expanded":false,"aria-activedescendant":""}); G.find("button").attr({"aria-label":this.settings.buttonLabel+" 열기"});G.find("button > span").attr("aria-hidden",true);G.find("ul").attr({role:"listbox","aria-hidden":true}); G.find("li").attr("role","option");if(!this.settings.usingAria){this.settings.usingAria=true;console.info("WAI-ARIA가 적용되었습니다.");}return this;}function u(){var G=this.$el; var H=["role","aria-autocomplete","aria-owns","aria-haspopup","aria-readonly","aria-expanded","aria-activedescendant"];G.removeAttr("role");var I=G.find("input"); while(H.length){I.removeAttr(H.pop());}G.find("button").removeAttr("aria-label");G.find("button > span").removeAttr("aria-hidden");G.find("ul").removeAttr("role").removeAttr("aria-hidden"); this.settings.usingAria=false;console.info("WAI-ARIA가 해제되었습니다.");return this;}function y(){var G=this.$el;var I=G.find("input");var H=d("<button>",{type:"button","class":"ui-combobox-button","data-label":this.settings.buttonLabel+" 열기",html:'<span class="fa fa-angle-down"></span>'}); I.after(H);}function t(){var I=this.$el;var H=this.settings.options;var L=d("<ul>",{id:this.id+"-list","class":"ui-combobox-list","data-hidden":true}); var J=0,G=H.length,K;for(;(K=H[J]);J++){L.append(d("<li>",{id:this.id+"-option-"+ ++this.option_id_idx,"class":"ui-combobox-list-option",text:K}));}I.append(L); }function z(){var I=this;var J=I.$el;var K=J.find("input");var G=J.find("button");var H=J.find("li");K.on({click:d.proxy(F,I),keydown:d.proxy(h,I),blur:d.proxy(c,I)}); G.on({click:d.proxy(e,I),keydown:d.proxy(h,I)});d.each(H,function(L,M){var N=H.eq(L);N.on("click",d.proxy(i,N,L,I));});}function F(G){!D.call(this)&&a.call(this); }function h(H){var G=this.$el;var I=G.find("input");if(H.altKey){if(H.keyCode===r.up){a.call(this);I.data("memory-value",I.val());}H.keyCode===r.down&&m.call(this); return;}if(D.call(this)){H.keyCode===r.up&&s.call(this);H.keyCode===r.down&&k.call(this);H.keyCode===r.pageup&&l.call(this);H.keyCode===r.pagedown&&p.call(this); H.keyCode===r.esc&&x.call(this);(H.keyCode===r.enter||H.keyCode===r.space)&&B.call(this);return;}else{if(H.keyCode===r.up){s.call(this);B.call(this);}if(H.keyCode===r.down){k.call(this); B.call(this);}}}function c(G){v.setTimeout(d.proxy(m,this),100);}function f(){this.$el.find("input").focus();}function D(){var G=this.$el.find("input"); return G.attr("data-expanded")==="true"?true:false;}function e(){D.call(this)?m.call(this):a.call(this);return this;}function a(){var H=this.$el;var J=H.find("input"); var I=H.find("ul");var G=H.find("button");J.attr("data-expanded",true);I.attr("data-hidden",false);G.attr("data-label",this.settings.buttonLabel+" 닫기").find("span").removeClass("fa-angle-down").addClass("fa-angle-up"); if(this.settings.usingAria){J.attr("aria-expanded",true);I.attr("aria-hidden",false);G.attr("aria-label",this.settings.buttonLabel+" 닫기");}return this; }function m(){var H=this.$el;var J=H.find("input");var I=H.find("ul");var G=H.find("button");J.attr("data-expanded",false);I.attr("data-hidden",true);G.attr("data-label",this.settings.buttonLabel+" 열기").find("span").removeClass("fa-angle-up").addClass("fa-angle-down"); if(this.settings.usingAria){J.attr("aria-expanded",false);I.attr("aria-hidden",true);G.attr("aria-label",this.settings.buttonLabel+" 열기");}return this; }function i(G,H){C.call(H,G);B.call(H);}function l(){C.call(this,0);}function p(){C.call(this,this.options_len-1);}function s(){C.call(this,--this.selected_option_idx<0?this.options_len-1:this.selected_option_idx); }function k(){C.call(this,++this.selected_option_idx>this.options_len-1?0:this.selected_option_idx);}function C(G){var H=this.$el.find("li");var I=H.eq(G); H.filter("."+this.settings.activeClass).removeClass(this.settings.activeClass);I.addClass(this.settings.activeClass);this.focused_option=I;this.selected_option_idx=G; j.call(this,this.focused_option.text());w.call(this,I.position().top);this.settings.usingAria&&o.call(this,this.focused_option.attr("id"));}function B(){j.call(this,this.focused_option.text()); D.call(this)&&m.call(this);f.call(this);}function x(){var J=this.$el.find("input");var G=this.$el.find("li");var I=J.data("memory-value");var H=G.filter(":contains("+I+")").attr("id"); j.call(this,I);D.call(this)&&m.call(this);f.call(this);this.settings.usingAria&&o.call(this,H);}function j(G){this.$el.find("input").val(G);}function o(G){this.$el.find("input").attr("aria-activedescendant",G); }function w(G){this.$el.find("ul").stop().animate({scrollTop:G},200,"linear");}})(this,this.jQuery);